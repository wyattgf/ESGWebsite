{"ast":null,"code":"import { extend, mobileCheck, q, color2Hex } from './helpers.js'; // const DEBUGMODE = window.location.toString().indexOf('VANTADEBUG') !== -1\n\nconst win = typeof window == 'object';\nlet THREE = win && window.THREE || {};\nif (win && !window.VANTA) window.VANTA = {};\nconst VANTA = win && window.VANTA || {};\n\nVANTA.register = (name, Effect) => {\n  return VANTA[name] = opts => new Effect(opts);\n};\n\nVANTA.version = '0.5.21';\nexport { VANTA }; // const ORBITCONTROLS = {\n//   enableZoom: false,\n//   userPanSpeed: 3,\n//   userRotateSpeed: 2.0,\n//   maxPolarAngle: Math.PI * 0.8, // (pi/2 is pure horizontal)\n//   mouseButtons: {\n//     ORBIT: THREE.MOUSE.LEFT,\n//     ZOOM: null,\n//     PAN: null\n//   }\n// }\n// if (DEBUGMODE) {\n//   extend(ORBITCONTROLS, {\n//     enableZoom: true,\n//     zoomSpeed: 4,\n//     minDistance: 100,\n//     maxDistance: 4500\n//   })\n// }\n// Namespace for errors\n\nconst error = function () {\n  Array.prototype.unshift.call(arguments, '[VANTA]');\n  return console.error.apply(this, arguments);\n};\n\nVANTA.VantaBase = class VantaBase {\n  constructor(userOptions = {}) {\n    if (!win) return false;\n    VANTA.current = this;\n    this.windowMouseMoveWrapper = this.windowMouseMoveWrapper.bind(this);\n    this.windowTouchWrapper = this.windowTouchWrapper.bind(this);\n    this.windowGyroWrapper = this.windowGyroWrapper.bind(this);\n    this.resize = this.resize.bind(this);\n    this.animationLoop = this.animationLoop.bind(this);\n    this.restart = this.restart.bind(this);\n    const defaultOptions = typeof this.getDefaultOptions === 'function' ? this.getDefaultOptions() : this.defaultOptions;\n    this.options = extend({\n      mouseControls: true,\n      touchControls: true,\n      gyroControls: false,\n      minHeight: 200,\n      minWidth: 200,\n      scale: 1,\n      scaleMobile: 1\n    }, defaultOptions);\n\n    if (userOptions instanceof HTMLElement || typeof userOptions === 'string') {\n      userOptions = {\n        el: userOptions\n      };\n    }\n\n    extend(this.options, userOptions);\n\n    if (this.options.THREE) {\n      THREE = this.options.THREE; // Optionally use a custom build of three.js\n    } // Set element\n\n\n    this.el = this.options.el;\n\n    if (this.el == null) {\n      error(\"Instance needs \\\"el\\\" param!\");\n    } else if (!(this.options.el instanceof HTMLElement)) {\n      const selector = this.el;\n      this.el = q(selector);\n\n      if (!this.el) {\n        error(\"Cannot find element\", selector);\n        return;\n      }\n    }\n\n    this.prepareEl();\n    this.initThree();\n    this.setSize(); // Init needs size\n\n    try {\n      this.init();\n    } catch (e) {\n      // FALLBACK - just use color\n      error('Init error', e);\n\n      if (this.renderer && this.renderer.domElement) {\n        this.el.removeChild(this.renderer.domElement);\n      }\n\n      if (this.options.backgroundColor) {\n        console.log('[VANTA] Falling back to backgroundColor');\n        this.el.style.background = color2Hex(this.options.backgroundColor);\n      }\n\n      return;\n    } // After init\n\n\n    this.initMouse(); // Triggers mouse, which needs to be called after init\n\n    this.resize();\n    this.animationLoop(); // Event listeners\n\n    const ad = window.addEventListener;\n    ad('resize', this.resize);\n    window.requestAnimationFrame(this.resize); // Force a resize after the first frame\n    // Add event listeners on window, because this element may be below other elements, which would block the element's own mousemove event\n\n    if (this.options.mouseControls) {\n      ad('scroll', this.windowMouseMoveWrapper);\n      ad('mousemove', this.windowMouseMoveWrapper);\n    }\n\n    if (this.options.touchControls) {\n      ad('touchstart', this.windowTouchWrapper);\n      ad('touchmove', this.windowTouchWrapper);\n    }\n\n    if (this.options.gyroControls) {\n      ad('deviceorientation', this.windowGyroWrapper);\n    }\n  }\n\n  setOptions(userOptions = {}) {\n    extend(this.options, userOptions);\n    this.triggerMouseMove();\n  }\n\n  prepareEl() {\n    let i, child; // wrapInner for text nodes, so text nodes can be put into foreground\n\n    if (typeof Node !== 'undefined' && Node.TEXT_NODE) {\n      for (i = 0; i < this.el.childNodes.length; i++) {\n        const n = this.el.childNodes[i];\n\n        if (n.nodeType === Node.TEXT_NODE) {\n          const s = document.createElement('span');\n          s.textContent = n.textContent;\n          n.parentElement.insertBefore(s, n);\n          n.remove();\n        }\n      }\n    } // Set foreground elements\n\n\n    for (i = 0; i < this.el.children.length; i++) {\n      child = this.el.children[i];\n\n      if (getComputedStyle(child).position === 'static') {\n        child.style.position = 'relative';\n      }\n\n      if (getComputedStyle(child).zIndex === 'auto') {\n        child.style.zIndex = 1;\n      }\n    } // Set canvas and container style\n\n\n    if (getComputedStyle(this.el).position === 'static') {\n      this.el.style.position = 'relative';\n    }\n  }\n\n  applyCanvasStyles(canvasEl, opts = {}) {\n    extend(canvasEl.style, {\n      position: 'absolute',\n      zIndex: 0,\n      top: 0,\n      left: 0,\n      background: ''\n    });\n    extend(canvasEl.style, opts);\n    canvasEl.classList.add('vanta-canvas');\n  }\n\n  initThree() {\n    if (!THREE.WebGLRenderer) {\n      console.warn(\"[VANTA] No THREE defined on window\");\n      return;\n    } // Set renderer\n\n\n    this.renderer = new THREE.WebGLRenderer({\n      alpha: true,\n      antialias: true\n    });\n    this.el.appendChild(this.renderer.domElement);\n    this.applyCanvasStyles(this.renderer.domElement);\n\n    if (isNaN(this.options.backgroundAlpha)) {\n      this.options.backgroundAlpha = 1;\n    }\n\n    this.scene = new THREE.Scene();\n  }\n\n  getCanvasElement() {\n    if (this.renderer) {\n      return this.renderer.domElement; // three.js\n    }\n\n    if (this.p5renderer) {\n      return this.p5renderer.canvas; // p5\n    }\n  }\n\n  getCanvasRect() {\n    const canvas = this.getCanvasElement();\n    if (!canvas) return false;\n    return canvas.getBoundingClientRect();\n  }\n\n  windowMouseMoveWrapper(e) {\n    const rect = this.getCanvasRect();\n    if (!rect) return false;\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {\n      this.mouseX = x;\n      this.mouseY = y;\n      if (!this.options.mouseEase) this.triggerMouseMove(x, y);\n    }\n  }\n\n  windowTouchWrapper(e) {\n    const rect = this.getCanvasRect();\n    if (!rect) return false;\n\n    if (e.touches.length === 1) {\n      const x = e.touches[0].clientX - rect.left;\n      const y = e.touches[0].clientY - rect.top;\n\n      if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {\n        this.mouseX = x;\n        this.mouseY = y;\n        if (!this.options.mouseEase) this.triggerMouseMove(x, y);\n      }\n    }\n  }\n\n  windowGyroWrapper(e) {\n    const rect = this.getCanvasRect();\n    if (!rect) return false;\n    const x = Math.round(e.alpha * 2) - rect.left;\n    const y = Math.round(e.beta * 2) - rect.top;\n\n    if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {\n      this.mouseX = x;\n      this.mouseY = y;\n      if (!this.options.mouseEase) this.triggerMouseMove(x, y);\n    }\n  }\n\n  triggerMouseMove(x, y) {\n    if (x === undefined && y === undefined) {\n      // trigger at current position\n      if (this.options.mouseEase) {\n        x = this.mouseEaseX;\n        y = this.mouseEaseY;\n      } else {\n        x = this.mouseX;\n        y = this.mouseY;\n      }\n    }\n\n    if (this.uniforms) {\n      this.uniforms.iMouse.value.x = x / this.scale; // pixel values\n\n      this.uniforms.iMouse.value.y = y / this.scale; // pixel values\n    }\n\n    const xNorm = x / this.width; // 0 to 1\n\n    const yNorm = y / this.height; // 0 to 1\n\n    typeof this.onMouseMove === \"function\" ? this.onMouseMove(xNorm, yNorm) : void 0;\n  }\n\n  setSize() {\n    this.scale || (this.scale = 1);\n\n    if (mobileCheck() && this.options.scaleMobile) {\n      this.scale = this.options.scaleMobile;\n    } else if (this.options.scale) {\n      this.scale = this.options.scale;\n    }\n\n    this.width = Math.max(this.el.offsetWidth, this.options.minWidth);\n    this.height = Math.max(this.el.offsetHeight, this.options.minHeight);\n  }\n\n  initMouse() {\n    // Init mouseX and mouseY\n    if (!this.mouseX && !this.mouseY || this.mouseX === this.options.minWidth / 2 && this.mouseY === this.options.minHeight / 2) {\n      this.mouseX = this.width / 2;\n      this.mouseY = this.height / 2;\n      this.triggerMouseMove(this.mouseX, this.mouseY);\n    }\n  }\n\n  resize() {\n    this.setSize();\n\n    if (this.camera) {\n      this.camera.aspect = this.width / this.height;\n\n      if (typeof this.camera.updateProjectionMatrix === \"function\") {\n        this.camera.updateProjectionMatrix();\n      }\n    }\n\n    if (this.renderer) {\n      this.renderer.setSize(this.width, this.height);\n      this.renderer.setPixelRatio(window.devicePixelRatio / this.scale);\n    }\n\n    typeof this.onResize === \"function\" ? this.onResize() : void 0;\n  }\n\n  isOnScreen() {\n    const elHeight = this.el.offsetHeight;\n    const elRect = this.el.getBoundingClientRect();\n    const scrollTop = window.pageYOffset || (document.documentElement || document.body.parentNode || document.body).scrollTop;\n    const offsetTop = elRect.top + scrollTop;\n    const minScrollTop = offsetTop - window.innerHeight;\n    const maxScrollTop = offsetTop + elHeight;\n    return minScrollTop <= scrollTop && scrollTop <= maxScrollTop;\n  }\n\n  animationLoop() {\n    // Step time\n    this.t || (this.t = 0);\n    this.t += 1; // Uniform time\n\n    this.t2 || (this.t2 = 0);\n    this.t2 += this.options.speed || 1;\n\n    if (this.uniforms) {\n      this.uniforms.iTime.value = this.t2 * 0.016667; // iTime is in seconds\n    }\n\n    if (this.options.mouseEase) {\n      this.mouseEaseX = this.mouseEaseX || this.mouseX || 0;\n      this.mouseEaseY = this.mouseEaseY || this.mouseY || 0;\n\n      if (Math.abs(this.mouseEaseX - this.mouseX) + Math.abs(this.mouseEaseY - this.mouseY) > 0.1) {\n        this.mouseEaseX += (this.mouseX - this.mouseEaseX) * 0.05;\n        this.mouseEaseY += (this.mouseY - this.mouseEaseY) * 0.05;\n        this.triggerMouseMove(this.mouseEaseX, this.mouseEaseY);\n      }\n    } // Only animate if element is within view\n\n\n    if (this.isOnScreen() || this.options.forceAnimate) {\n      if (typeof this.onUpdate === \"function\") {\n        this.onUpdate();\n      }\n\n      if (this.scene && this.camera) {\n        this.renderer.render(this.scene, this.camera);\n        this.renderer.setClearColor(this.options.backgroundColor, this.options.backgroundAlpha);\n      } // if (this.stats) this.stats.update()\n      // if (this.renderStats) this.renderStats.update(this.renderer)\n\n\n      if (this.fps && this.fps.update) this.fps.update();\n      if (typeof this.afterRender === \"function\") this.afterRender();\n    }\n\n    return this.req = window.requestAnimationFrame(this.animationLoop);\n  } // setupControls() {\n  //   if (DEBUGMODE && THREE.OrbitControls) {\n  //     this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement)\n  //     extend(this.controls, ORBITCONTROLS)\n  //     return this.scene.add(new THREE.AxisHelper(100))\n  //   }\n  // }\n\n\n  restart() {\n    // Restart the effect without destroying the renderer\n    if (this.scene) {\n      while (this.scene.children.length) {\n        this.scene.remove(this.scene.children[0]);\n      }\n    }\n\n    if (typeof this.onRestart === \"function\") {\n      this.onRestart();\n    }\n\n    this.init();\n  }\n\n  init() {\n    if (typeof this.onInit === \"function\") {\n      this.onInit();\n    } // this.setupControls()\n\n  }\n\n  destroy() {\n    if (typeof this.onDestroy === \"function\") {\n      this.onDestroy();\n    }\n\n    const rm = window.removeEventListener;\n    rm('touchstart', this.windowTouchWrapper);\n    rm('touchmove', this.windowTouchWrapper);\n    rm('scroll', this.windowMouseMoveWrapper);\n    rm('mousemove', this.windowMouseMoveWrapper);\n    rm('deviceorientation', this.windowGyroWrapper);\n    rm('resize', this.resize);\n    window.cancelAnimationFrame(this.req);\n\n    if (this.renderer) {\n      if (this.renderer.domElement) {\n        this.el.removeChild(this.renderer.domElement);\n      }\n\n      this.renderer = null;\n      this.scene = null;\n    }\n\n    if (VANTA.current === this) {\n      VANTA.current = null;\n    }\n  }\n\n};\nexport default VANTA.VantaBase;","map":{"version":3,"sources":["/Users/wyattfocht/Documents/Website Projects/ESGWebsite/esgwebsite/node_modules/vanta/src/_base.js"],"names":["extend","mobileCheck","q","color2Hex","win","window","THREE","VANTA","register","name","Effect","opts","version","error","Array","prototype","unshift","call","arguments","console","apply","VantaBase","constructor","userOptions","current","windowMouseMoveWrapper","bind","windowTouchWrapper","windowGyroWrapper","resize","animationLoop","restart","defaultOptions","getDefaultOptions","options","mouseControls","touchControls","gyroControls","minHeight","minWidth","scale","scaleMobile","HTMLElement","el","selector","prepareEl","initThree","setSize","init","e","renderer","domElement","removeChild","backgroundColor","log","style","background","initMouse","ad","addEventListener","requestAnimationFrame","setOptions","triggerMouseMove","i","child","Node","TEXT_NODE","childNodes","length","n","nodeType","s","document","createElement","textContent","parentElement","insertBefore","remove","children","getComputedStyle","position","zIndex","applyCanvasStyles","canvasEl","top","left","classList","add","WebGLRenderer","warn","alpha","antialias","appendChild","isNaN","backgroundAlpha","scene","Scene","getCanvasElement","p5renderer","canvas","getCanvasRect","getBoundingClientRect","rect","x","clientX","y","clientY","width","height","mouseX","mouseY","mouseEase","touches","Math","round","beta","undefined","mouseEaseX","mouseEaseY","uniforms","iMouse","value","xNorm","yNorm","onMouseMove","max","offsetWidth","offsetHeight","camera","aspect","updateProjectionMatrix","setPixelRatio","devicePixelRatio","onResize","isOnScreen","elHeight","elRect","scrollTop","pageYOffset","documentElement","body","parentNode","offsetTop","minScrollTop","innerHeight","maxScrollTop","t","t2","speed","iTime","abs","forceAnimate","onUpdate","render","setClearColor","fps","update","afterRender","req","onRestart","onInit","destroy","onDestroy","rm","removeEventListener","cancelAnimationFrame"],"mappings":"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","sourcesContent":["import {extend, mobileCheck, q, color2Hex} from './helpers.js'\n// const DEBUGMODE = window.location.toString().indexOf('VANTADEBUG') !== -1\n\nconst win = typeof window == 'object'\nlet THREE = (win && window.THREE) || {}\nif (win && !window.VANTA) window.VANTA = {}\nconst VANTA = (win && window.VANTA) || {}\nVANTA.register = (name, Effect) => {\n  return VANTA[name] = (opts) => new Effect(opts)\n}\nVANTA.version = '0.5.21'\n\nexport {VANTA}\n\n// const ORBITCONTROLS = {\n//   enableZoom: false,\n//   userPanSpeed: 3,\n//   userRotateSpeed: 2.0,\n//   maxPolarAngle: Math.PI * 0.8, // (pi/2 is pure horizontal)\n//   mouseButtons: {\n//     ORBIT: THREE.MOUSE.LEFT,\n//     ZOOM: null,\n//     PAN: null\n//   }\n// }\n// if (DEBUGMODE) {\n//   extend(ORBITCONTROLS, {\n//     enableZoom: true,\n//     zoomSpeed: 4,\n//     minDistance: 100,\n//     maxDistance: 4500\n//   })\n// }\n\n// Namespace for errors\nconst error = function() {\n  Array.prototype.unshift.call(arguments, '[VANTA]')\n  return console.error.apply(this, arguments)\n}\n\nVANTA.VantaBase = class VantaBase {\n  constructor(userOptions = {}) {\n    if (!win) return false\n    VANTA.current = this\n    this.windowMouseMoveWrapper = this.windowMouseMoveWrapper.bind(this)\n    this.windowTouchWrapper = this.windowTouchWrapper.bind(this)\n    this.windowGyroWrapper = this.windowGyroWrapper.bind(this)\n    this.resize = this.resize.bind(this)\n    this.animationLoop = this.animationLoop.bind(this)\n    this.restart = this.restart.bind(this)\n\n    const defaultOptions = (typeof this.getDefaultOptions === 'function') ? this.getDefaultOptions() : this.defaultOptions\n    this.options = extend({\n      mouseControls: true,\n      touchControls: true,\n      gyroControls: false,\n      minHeight: 200,\n      minWidth: 200,\n      scale: 1,\n      scaleMobile: 1,\n    }, defaultOptions)\n\n    if (userOptions instanceof HTMLElement || typeof userOptions === 'string') {\n      userOptions = {el: userOptions}\n    }\n    extend(this.options, userOptions)\n\n    if (this.options.THREE) {\n      THREE = this.options.THREE // Optionally use a custom build of three.js\n    }\n\n    // Set element\n    this.el = this.options.el\n    if (this.el == null) {\n      error(\"Instance needs \\\"el\\\" param!\")\n    } else if (!(this.options.el instanceof HTMLElement)) {\n      const selector = this.el\n      this.el = q(selector)\n      if (!this.el) {\n        error(\"Cannot find element\", selector)\n        return\n      }\n    }\n\n    this.prepareEl()\n    this.initThree()\n    this.setSize() // Init needs size\n\n    try {\n      this.init()\n    } catch (e) {\n      // FALLBACK - just use color\n      error('Init error', e)\n      if (this.renderer && this.renderer.domElement) {\n        this.el.removeChild(this.renderer.domElement)\n      }\n      if (this.options.backgroundColor) {\n        console.log('[VANTA] Falling back to backgroundColor')\n        this.el.style.background = color2Hex(this.options.backgroundColor)\n      }\n      return\n    }\n\n    // After init\n    this.initMouse() // Triggers mouse, which needs to be called after init\n    this.resize()\n    this.animationLoop()\n\n    // Event listeners\n    const ad = window.addEventListener\n    ad('resize', this.resize)\n    window.requestAnimationFrame(this.resize) // Force a resize after the first frame\n\n    // Add event listeners on window, because this element may be below other elements, which would block the element's own mousemove event\n    if (this.options.mouseControls) {\n      ad('scroll', this.windowMouseMoveWrapper)\n      ad('mousemove', this.windowMouseMoveWrapper)\n    }\n    if (this.options.touchControls) {\n      ad('touchstart', this.windowTouchWrapper)\n      ad('touchmove', this.windowTouchWrapper)\n    }\n    if (this.options.gyroControls) {\n      ad('deviceorientation', this.windowGyroWrapper)\n    }\n  }\n\n  setOptions(userOptions={}){\n    extend(this.options, userOptions)\n    this.triggerMouseMove()\n  }\n\n  prepareEl() {\n    let i, child\n    // wrapInner for text nodes, so text nodes can be put into foreground\n    if (typeof Node !== 'undefined' && Node.TEXT_NODE) {\n      for (i = 0; i < this.el.childNodes.length; i++) {\n        const n = this.el.childNodes[i]\n        if (n.nodeType === Node.TEXT_NODE) {\n          const s = document.createElement('span')\n          s.textContent = n.textContent\n          n.parentElement.insertBefore(s, n)\n          n.remove()\n        }\n      }\n    }\n    // Set foreground elements\n    for (i = 0; i < this.el.children.length; i++) {\n      child = this.el.children[i]\n      if (getComputedStyle(child).position === 'static') {\n        child.style.position = 'relative'\n      }\n      if (getComputedStyle(child).zIndex === 'auto') {\n        child.style.zIndex = 1\n      }\n    }\n    // Set canvas and container style\n    if (getComputedStyle(this.el).position === 'static') {\n      this.el.style.position = 'relative'\n    }\n  }\n\n  applyCanvasStyles(canvasEl, opts={}){\n    extend(canvasEl.style, {\n      position: 'absolute',\n      zIndex: 0,\n      top: 0,\n      left: 0,\n      background: ''\n    })\n    extend(canvasEl.style, opts)\n    canvasEl.classList.add('vanta-canvas')\n  }\n\n  initThree() {\n    if (!THREE.WebGLRenderer) {\n      console.warn(\"[VANTA] No THREE defined on window\")\n      return\n    }\n    // Set renderer\n    this.renderer = new THREE.WebGLRenderer({\n      alpha: true,\n      antialias: true\n    })\n    this.el.appendChild(this.renderer.domElement)\n    this.applyCanvasStyles(this.renderer.domElement)\n    if (isNaN(this.options.backgroundAlpha)) {\n      this.options.backgroundAlpha = 1\n    }\n\n    this.scene = new THREE.Scene()\n  }\n\n  getCanvasElement() {\n    if (this.renderer) {\n      return this.renderer.domElement // three.js\n    }\n    if (this.p5renderer) {\n      return this.p5renderer.canvas // p5\n    }\n  }\n\n  getCanvasRect() {\n    const canvas = this.getCanvasElement()\n    if (!canvas) return false\n    return canvas.getBoundingClientRect()\n  }\n\n  windowMouseMoveWrapper(e){\n    const rect = this.getCanvasRect()\n    if (!rect) return false\n    const x = e.clientX - rect.left\n    const y = e.clientY - rect.top\n    if (x>=0 && y>=0 && x<=rect.width && y<=rect.height) {\n      this.mouseX = x\n      this.mouseY = y\n      if (!this.options.mouseEase) this.triggerMouseMove(x, y)\n    }\n  }\n  windowTouchWrapper(e){\n    const rect = this.getCanvasRect()\n    if (!rect) return false\n    if (e.touches.length === 1) {\n      const x = e.touches[0].clientX - rect.left\n      const y = e.touches[0].clientY - rect.top\n      if (x>=0 && y>=0 && x<=rect.width && y<=rect.height) {\n        this.mouseX = x\n        this.mouseY = y\n        if (!this.options.mouseEase) this.triggerMouseMove(x, y)\n      }\n    }\n  }\n  windowGyroWrapper(e){\n    const rect = this.getCanvasRect()\n    if (!rect) return false\n    const x = Math.round(e.alpha * 2) - rect.left\n    const y = Math.round(e.beta * 2) - rect.top\n    if (x>=0 && y>=0 && x<=rect.width && y<=rect.height) {\n      this.mouseX = x\n      this.mouseY = y\n      if (!this.options.mouseEase) this.triggerMouseMove(x, y)\n    }\n  }\n\n  triggerMouseMove(x, y) {\n    if (x === undefined && y === undefined) { // trigger at current position\n      if (this.options.mouseEase) {\n        x = this.mouseEaseX\n        y = this.mouseEaseY\n      } else {\n        x = this.mouseX\n        y = this.mouseY\n      }\n    }\n    if (this.uniforms) {\n      this.uniforms.iMouse.value.x = x / this.scale // pixel values\n      this.uniforms.iMouse.value.y = y / this.scale // pixel values\n    }\n    const xNorm = x / this.width // 0 to 1\n    const yNorm = y / this.height // 0 to 1\n    typeof this.onMouseMove === \"function\" ? this.onMouseMove(xNorm, yNorm) : void 0\n  }\n\n  setSize() {\n    this.scale || (this.scale = 1)\n    if (mobileCheck() && this.options.scaleMobile) {\n      this.scale = this.options.scaleMobile\n    } else if (this.options.scale) {\n      this.scale = this.options.scale\n    }\n    this.width = Math.max(this.el.offsetWidth, this.options.minWidth)\n    this.height = Math.max(this.el.offsetHeight, this.options.minHeight)\n  }\n  initMouse() {\n    // Init mouseX and mouseY\n    if ((!this.mouseX && !this.mouseY) ||\n      (this.mouseX === this.options.minWidth/2 && this.mouseY === this.options.minHeight/2)) {\n      this.mouseX = this.width/2\n      this.mouseY = this.height/2\n      this.triggerMouseMove(this.mouseX, this.mouseY)\n    }\n  }\n\n  resize() {\n    this.setSize()\n    if (this.camera) {\n      this.camera.aspect = this.width / this.height\n      if (typeof this.camera.updateProjectionMatrix === \"function\") {\n        this.camera.updateProjectionMatrix()\n      }\n    }\n    if (this.renderer) {\n      this.renderer.setSize(this.width, this.height)\n      this.renderer.setPixelRatio(window.devicePixelRatio / this.scale)\n    }\n    typeof this.onResize === \"function\" ? this.onResize() : void 0\n  }\n\n  isOnScreen() {\n    const elHeight = this.el.offsetHeight\n    const elRect = this.el.getBoundingClientRect()\n    const scrollTop = (window.pageYOffset ||\n      (document.documentElement || document.body.parentNode || document.body).scrollTop\n    )\n    const offsetTop = elRect.top + scrollTop\n    const minScrollTop = offsetTop - window.innerHeight\n    const maxScrollTop = offsetTop + elHeight\n    return minScrollTop <= scrollTop && scrollTop <= maxScrollTop\n  }\n\n  animationLoop() {\n    // Step time\n    this.t || (this.t = 0)\n    this.t += 1\n    // Uniform time\n    this.t2 || (this.t2 = 0)\n    this.t2 += (this.options.speed || 1)\n    if (this.uniforms) {\n      this.uniforms.iTime.value = this.t2 * 0.016667 // iTime is in seconds\n    }\n\n    if (this.options.mouseEase) {\n      this.mouseEaseX = this.mouseEaseX || this.mouseX || 0\n      this.mouseEaseY = this.mouseEaseY || this.mouseY || 0\n      if (Math.abs(this.mouseEaseX-this.mouseX) + Math.abs(this.mouseEaseY-this.mouseY) > 0.1) {\n        this.mouseEaseX += (this.mouseX - this.mouseEaseX) * 0.05\n        this.mouseEaseY += (this.mouseY - this.mouseEaseY) * 0.05\n        this.triggerMouseMove(this.mouseEaseX, this.mouseEaseY)\n      }\n    }\n\n    // Only animate if element is within view\n    if (this.isOnScreen() || this.options.forceAnimate) {\n      if (typeof this.onUpdate === \"function\") {\n        this.onUpdate()\n      }\n      if (this.scene && this.camera) {\n        this.renderer.render(this.scene, this.camera)\n        this.renderer.setClearColor(this.options.backgroundColor, this.options.backgroundAlpha)\n      }\n      // if (this.stats) this.stats.update()\n      // if (this.renderStats) this.renderStats.update(this.renderer)\n      if (this.fps && this.fps.update) this.fps.update()\n      if (typeof this.afterRender === \"function\") this.afterRender()\n    }\n    return this.req = window.requestAnimationFrame(this.animationLoop)\n  }\n\n  // setupControls() {\n  //   if (DEBUGMODE && THREE.OrbitControls) {\n  //     this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement)\n  //     extend(this.controls, ORBITCONTROLS)\n  //     return this.scene.add(new THREE.AxisHelper(100))\n  //   }\n  // }\n\n  restart() {\n    // Restart the effect without destroying the renderer\n    if (this.scene) {\n      while (this.scene.children.length) {\n        this.scene.remove(this.scene.children[0])\n      }\n    }\n    if (typeof this.onRestart === \"function\") {\n      this.onRestart()\n    }\n    this.init()\n  }\n\n  init() {\n    if (typeof this.onInit === \"function\") {\n      this.onInit()\n    }\n    // this.setupControls()\n  }\n\n  destroy() {\n    if (typeof this.onDestroy === \"function\") {\n      this.onDestroy()\n    }\n    const rm = window.removeEventListener\n    rm('touchstart', this.windowTouchWrapper)\n    rm('touchmove', this.windowTouchWrapper)\n    rm('scroll', this.windowMouseMoveWrapper)\n    rm('mousemove', this.windowMouseMoveWrapper)\n    rm('deviceorientation', this.windowGyroWrapper)\n    rm('resize', this.resize)\n\n    window.cancelAnimationFrame(this.req)\n    if (this.renderer) {\n      if (this.renderer.domElement) {\n        this.el.removeChild(this.renderer.domElement)\n      }\n      this.renderer = null\n      this.scene = null\n    }\n\n    if (VANTA.current === this) {\n      VANTA.current = null\n    }\n  }\n}\n\nexport default VANTA.VantaBase"]},"metadata":{},"sourceType":"module"}